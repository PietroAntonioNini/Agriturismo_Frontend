<div class="confirmation-dialog" [ngClass]="{'danger-mode': data.dangerMode}" [@dialogAnimation]="state" role="dialog" aria-modal="true" [attr.aria-labelledby]="'dialog-title-' + dialogId" [attr.aria-describedby]="'dialog-desc-' + dialogId">
  <div class="dialog-content-wrapper">
    <!-- Icona principale -->
    <div class="main-icon" [ngClass]="{'danger': data.dangerMode}" aria-hidden="true">
      <mat-icon *ngIf="data.dangerMode">warning</mat-icon>
      <mat-icon *ngIf="!data.dangerMode">info</mat-icon>
    </div>

    <!-- Titolo -->
    <h2 class="dialog-title" [id]="'dialog-title-' + dialogId">{{ data.title }}</h2>

    <!-- Messaggio -->
    <div class="dialog-content" [id]="'dialog-desc-' + dialogId">
      <p class="message" [innerHTML]="data.message"></p>
      <p class="submessage" *ngIf="data.submessage" [innerHTML]="data.submessage"></p>
    </div>

    <!-- Elemento evidenziato (opzionale) -->
    <div class="highlight-box" *ngIf="data.highlightItem" role="status">
      <span class="item-name">{{ data.highlightItem }}</span>
    </div>

    <!-- Azioni -->
    <div class="dialog-actions">
      <button
        type="button"
        mat-button
        class="cancel-button"
        (click)="onCancel()"
        [disabled]="isProcessing"
        [@buttonAnimation]="'in'">
        <mat-icon *ngIf="data.cancelIcon" aria-hidden="true">{{ data.cancelIcon }}</mat-icon>
        <span>{{ data.cancelText }}</span>
      </button>

      <button
        type="button"
        mat-raised-button
        class="confirm-button"
        [ngClass]="{'danger-button': data.dangerMode}"
        (click)="onConfirm()"
        [disabled]="isProcessing"
        [@buttonAnimation]="'in'">
        <mat-spinner *ngIf="isProcessing" diameter="20" class="button-spinner" aria-hidden="true"></mat-spinner>
        <mat-icon *ngIf="!isProcessing && data.confirmIcon" aria-hidden="true">{{ data.confirmIcon }}</mat-icon>
        <span>{{ data.confirmText }}</span>
      </button>
    </div>
  </div>
</div>
